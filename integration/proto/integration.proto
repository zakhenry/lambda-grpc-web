syntax = "proto3";

package integration.v1;

service Test {

  rpc Unary (UnaryRequest) returns (UnaryResponse);
  rpc ServerStream (ServerStreamRequest) returns (stream ServerStreamResponse);
  // note grpc web does not support any client streaming types
}

message UnaryRequest {
  enum UnaryTestCase {
    UNKNOWN = 0;
    OK = 1; // success response
    PANIC = 2; // uncaught panic
    LAMBDA_CONTEXT_IN_HEADERS = 3; // inserts aws lambda context into headers
  }

  UnaryTestCase test_case = 1;
}

message UnaryResponse {
  optional string message = 1;
}


message ServerStreamRequest {
  enum StreamTestCase {
    UNKNOWN = 0;
    EMPTY = 1; // success, but no content
    OK = 2; // success response
    IMMEDIATE_ERROR = 3; // no response, error occurs immediately.
    ERROR_AFTER_PARTIAL_RESPONSE = 4; // response, then terminate with error
    NEVER_RESPOND = 5;
  }

  StreamTestCase test_case = 1;
}

message ServerStreamResponse {
  optional string message = 1;
}

